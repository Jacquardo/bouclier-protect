/* ================= Variables ================= */
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@600;800&display=swap');

:root{
  --presentation-bg-1: url("bg1.png");
  --presentation-bg-2: url("bg2.png");
  --bg: #DBDCDC; /* page background updated as requested */
  --card: #ffffff;
  --accent: #0b4a6f;
  --accent-light: #1f6fb0;
  --muted: #6b7280;
  --radius: 14px;
  --maxw: 1440px;
  --shadow-strong: rgba(11,74,111,0.18);
  --shadow-soft: rgba(0,0,0,0.06);
  --presentation-fade-duration: 12s;
  --presentation-overlay: rgba(6,12,20,0.36);
  --modal-gradient-top: #0b4a6f;
  --modal-gradient-bottom: #ffffff;
  --base-font-size: 16px;

  /* Layout heights for full-window behavior */
  --header-height: 120px; /* adjust if header is taller/shorter */
  --footer-height: 84px;  /* adjust if footer is taller/shorter */

  /* safe area helpers (default values, may be overridden by env) */
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}

/* ================= Reset & base ================= */
* { box-sizing: border-box; margin: 0; padding: 0; }

/* Ensure html/body fill the viewport and enable flex layout for full-height page */
html, body {
  height: 100%;
  min-height: 100vh;
  font-size: var(--base-font-size);
}

/* Make body a column flex container so header/main/footer layout fills the window */
body {
  display: flex;
  flex-direction: column;
  font-family: "Montserrat", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: linear-gradient(180deg, var(--bg), #e6edf5); /* uses updated --bg */
  color: #0f1724;
  line-height: 1.6;
  min-height: 100vh;
}

/* Skip link */
.skip-link {
  position: absolute;
  left: -999px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}
.skip-link:focus,
.skip-link:focus-visible {
  position: static;
  left: 12px;
  top: 12px;
  width: auto;
  height: auto;
  padding: 8px 12px;
  background: #06283b;
  color: #fff;
  border-radius: 6px;
  z-index: 1200;
  text-decoration: none;
}

/* ================= Container ================= */
.container{
  max-width: var(--maxw);
  margin: 18px auto;
  padding: 28px;
  box-sizing: border-box;
  /* allow container to grow inside main when needed */
  min-height: 100%;
  display: block;
}

/* ================= Header (sticky, centered, compact) ================= */
/* Compact header: reduced vertical padding and smaller logo to lower overall height */
header{
  position: sticky;
  top: calc(var(--safe-top) + 8px);
  width: calc(100% - 8px);
  max-width: calc(var(--maxw) + 90px);
  margin: 0 auto 40px; /* increased space between header and main */
  background: linear-gradient(180deg, #041e2a 0%, #08324a 30%, #0b6aa0 65%, #3fb0e8 100%);
  color: #fff;
  border-radius: 18px;
  padding: 10px 18px; /* reduced vertical padding for a shorter header */
  text-align: center;
  box-shadow: 0 10px 30px var(--shadow-strong);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  z-index: 1100;

  /* ensure header occupies expected visual height while remaining flexible */
  min-height: var(--header-height);
  height: auto;
  flex: 0 0 auto;
}

/* brand (logo) */
.brand{
  position: absolute;
  left: 20px;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  align-items: center;
  gap: 12px;
}
.brand img{
  width: 96px;   /* reduced from 128px to fit compact header */
  height: 96px;
  border-radius: 12px;
  object-fit: contain;
  background: linear-gradient(135deg,#e6f2f8,#ffffff);
  padding: 6px;
  border: 1px solid rgba(255,255,255,0.06);
}

/* ================= Header title and hero styles ================= */
.header-title{
  max-width: calc(var(--maxw) - 420px);
  margin: 0 auto;
  text-align: center;
  padding: 4px 12px;
}

/* Hero title: gradient text, bold, large but slightly reduced to keep header compact */
.header-title .hero-title{
  margin: 0;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.6px;
  line-height: 1;
  font-size: clamp(1.25rem, 5.2vw, 2.6rem); /* reduced max size for compact header */

  background: linear-gradient(180deg, #06283b 0%, #0b6aa0 50%, #3fb0e8 100%);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;

  text-shadow:
    0 6px 18px rgba(2,8,16,0.56),
    0 1px 0 rgba(255,255,255,0.02);
  -webkit-filter: drop-shadow(0 4px 12px rgba(2,8,16,0.45));
  filter: drop-shadow(0 4px 12px rgba(2,8,16,0.45));
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  display: block;
  padding: 0 4px;
}

/* Fallback solid color for very small screens or when gradient is not desired */
.header-title .hero-title.fallback-solid{
  -webkit-text-fill-color: #eaf6ff;
  color: #eaf6ff;
  background: none;
  -webkit-background-clip: unset;
  text-shadow: 0 3px 8px rgba(0,0,0,0.55);
}

/* Subtitle under the hero */
.header-title .subtitle{
  margin: 6px 0 0;
  font-size: clamp(0.72rem, 2.0vw, 0.95rem);
  color: rgba(224,230,240,0.95);
  letter-spacing: 0.9px;
  text-transform: uppercase;
  font-weight: 600;
  opacity: 0.95;
}

/* Tagline (existing) kept but visually separated */
.header-title .tagline{
  margin-top: 6px;
  font-size: 0.92rem;
  color: rgba(224,230,240,0.9);
  font-weight: 600;
}

/* ================= Presentation background ================= */
.presentation-card{ position: relative; overflow: visible; border-radius: var(--radius); }
.presentation-bg{ position: absolute; inset: 0; z-index: 0; pointer-events: none; will-change: opacity, transform, filter; }
.presentation-bg::before,
.presentation-bg::after{
  content: "";
  position: absolute;
  inset: 0;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  display: block;
  transition: opacity .6s ease-in-out, transform .6s ease-in-out;
  will-change: opacity, transform, filter;
  transform: scale(1.04);
  -webkit-filter: blur(6px) contrast(0.98) saturate(0.95);
  filter: blur(6px) contrast(0.98) saturate(0.95);
}
.presentation-bg::before{
  background-image: linear-gradient(var(--presentation-overlay), var(--presentation-overlay)), var(--presentation-bg-1);
  opacity: 1;
  animation: presentationCrossfade var(--presentation-fade-duration) ease-in-out infinite;
}
.presentation-bg::after{
  background-image: linear-gradient(var(--presentation-overlay), var(--presentation-overlay)), var(--presentation-bg-2);
  opacity: 0;
  animation: presentationCrossfadeInverse var(--presentation-fade-duration) ease-in-out infinite;
}
.presentation-content{ position: relative; z-index: 2; padding: 6px 0; color: #325671; }

.presentation-card .presentation-content > p:first-of-type {
  color: #ffffff;
  text-shadow: 0 2px 6px rgba(0,0,0,0.45);
  line-height: 1.75;
  font-size: 1.05rem;
}
.presentation-card .presentation-content > .contexts { margin-top: 28px; }

@keyframes presentationCrossfade {
  0%{ opacity:1; transform:scale(1.04); } 45%{ opacity:1; transform:scale(1.02); } 55%{ opacity:0; transform:scale(1.00); } 100%{ opacity:0; transform:scale(1.00); }
}
@keyframes presentationCrossfadeInverse {
  0%{ opacity:0; transform:scale(1.00); } 45%{ opacity:0; transform:scale(1.00); } 55%{ opacity:1; transform:scale(1.02); } 100%{ opacity:1; transform:scale(1.04); }
}

/* ================= Main layout (agrandi + aside augmenté) ================= */
/* Default grid adjusted to give aside more space */
/* Make main flexible so it fills the remaining viewport height between header and footer */
main{
  display: grid;
  grid-template-columns: 2.4fr 0.8fr; /* main slightly reduced, aside increased */
  gap: 36px;
  margin-top: 48px; /* increased space between header and main */
  margin-bottom: 48px; /* increased space between main and footer */
  align-items: start;
  min-height: 520px;

  /* full-height behavior */
  flex: 1 1 auto;
  overflow: auto;
  min-height: calc(100vh - var(--header-height) - var(--footer-height));
}

/* Ensure the container inside main can stretch vertically if needed */
main > .container {
  min-height: 100%;
  display: flex;
  flex-direction: column;
}

/* Card styles */
.card{ background: var(--card); border-radius: var(--radius); padding: 24px; box-shadow: 0 10px 28px var(--shadow-soft); position: relative; z-index: 2; }

/* ================= Contexts (centrés, rounded border + subtle border) ================= */
/* Keep horizontal snap scrolling on wide viewports, allow stacked layout on small screens */
.contexts{
  display: flex;
  justify-content: center;
  align-items: stretch;
  gap: 24px;
  flex-wrap: nowrap;
  overflow-x: auto;
  padding-bottom: 12px;
  -webkit-overflow-scrolling: touch;
  scroll-snap-type: x mandatory;
  transition: gap .18s ease;
}

/* Two context cards identical with rounded border and subtle outline */
.context{
  flex: 0 0 44%;
  max-width: 560px;
  min-width: 320px;
  height: 420px;
  box-sizing: border-box;
  background: #ffffff;
  border-radius: 18px;
  border: 1px solid rgba(11,74,111,0.08);
  padding: 18px;
  box-shadow: 0 8px 28px rgba(6,12,20,0.06);
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
  cursor: pointer;
  overflow: auto;
  position: relative;
  scroll-snap-align: center;
}
.context h3{ color: var(--accent); font-size: 1.14rem; margin-bottom: 10px; }
.context p{ color: var(--muted); font-size: 0.98rem; white-space: pre-wrap; }

/* Hover/focus unified */
.context:hover, .context:focus-within{
  transform: translateY(-6px);
  box-shadow: 0 22px 60px rgba(6,12,20,0.12);
  border-color: rgba(11,74,111,0.14);
  z-index: 3;
}

/* Expanded context: center content (both vertically and horizontally) for better reading.
   Keep overflow:auto so long content remains scrollable. Limit inner width for readability. */
.context.expanded{
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;

  flex: 0 0 70%;
  min-width: 420px;
  height: 480px;
  max-width: 100%;
  overflow: auto;
  padding: 22px;
  border-radius: 18px;
}

/* Improve children layout when centered */
.context.expanded > * {
  width: 100%;
  max-width: 820px; /* prevent overly wide lines on large screens */
  box-sizing: border-box;
}

/* For better reading, limit paragraph width and center it */
.context.expanded p,
.context.expanded h3 {
  margin-left: auto;
  margin-right: auto;
  max-width: 68ch; /* comfortable measure for reading */
}

/* ================= Hide scrollbar for first context (ctx1) and .no-scroll class ================= */
/* Prefer explicit class .no-scroll; keep first-child fallback for older markup */

/* For explicit class */
.context.no-scroll {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none;    /* Firefox */
  overflow: auto;           /* keep scroll if content exceeds */
}
.context.no-scroll::-webkit-scrollbar { display: none; }

/* Fallback: first-child selector */
.contexts .context:first-child {
  -ms-overflow-style: none;
  scrollbar-width: none;
  overflow: auto;
}
.contexts .context:first-child::-webkit-scrollbar { display: none; }

/* Ensure internal children don't force horizontal overflow */
.contexts .context > * { max-width: 100%; box-sizing: border-box; }

/* ================= Single-expanded mode ================= */
.contexts.single-expanded{
  overflow-x: hidden;
  gap: 0;
  align-items: stretch;
}
.contexts.single-expanded .context.expanded{
  flex: 1 1 100%;
  min-width: 0;
  max-width: 100%;
  transform: none;
  box-shadow: 0 28px 60px rgba(0,0,0,0.18);
  border-radius: var(--radius);
  overflow: auto;
  max-height: 520px;
}
.contexts.single-expanded .context:not(.expanded){
  flex: 0 0 0;
  min-width: 0;
  max-width: 0;
  padding: 0;
  margin: 0;
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition: none;
}

/* ================= Actions, buttons, phone ================= */
.actions{ margin-top: 18px; display: flex; gap: 14px; align-items: center; flex-wrap: wrap; }
.btn{
  display: inline-block;
  background: var(--accent);
  color: #fff;
  padding: 12px 18px;
  border-radius: 12px;
  text-decoration: none;
  font-weight: 700;
  transition: background .18s ease, transform .12s ease, box-shadow .12s ease;
  cursor: pointer;
}
.btn:hover, .btn:focus-visible{ background: var(--accent-light); transform: translateY(-1px); box-shadow: 0 8px 28px rgba(11,74,111,0.12); outline: none; }

.phone{
  color: var(--muted);
  display: flex;
  align-items: center;
  gap: 8px;
  white-space: nowrap;
}
.phone-number{
  color: var(--accent-light);
  cursor: pointer;
  font-weight: 700;
  display: inline-block;
  text-decoration: none;
}

.copy-phone-btn{
  background: rgba(11,74,111,0.06);
  border: 1px solid rgba(11,74,111,0.08);
  color: var(--accent);
  padding: 8px 10px;
  border-radius: 10px;
  font-weight: 700;
  margin-left: 8px;
  cursor: pointer;
}
.copy-phone-btn:hover, .copy-phone-btn:focus-visible{ background: rgba(11,74,111,0.09); outline: none; box-shadow: 0 6px 18px rgba(11,74,111,0.06); }

/* ================= Aside / services (increased width + visual polish) ================= */
.services-title{ font-weight: 800; color: var(--accent); margin-bottom: 8px; }
.services-list{ margin: 0; padding-left: 20px; color: var(--muted); }

/* Increase aside width and padding for better balance */
aside.card{
  max-width: 420px; /* increased from 320px */
  width: 100%;
  margin-left: auto;
  padding: 20px;    /* slightly larger padding */
  font-size: 0.98rem;
  border-radius: 14px;
  border: 1px solid rgba(11,74,111,0.06);
  box-shadow: 0 12px 36px rgba(6,12,20,0.06);
  background: linear-gradient(180deg, #ffffff, #fbfdff);
}
aside.card .services-list{ padding-left: 16px; font-size: 0.98rem; }

/* Responsive cap for aside on small screens */
@media (max-width: 767px) {
  aside.card { max-width: 100%; padding: 16px; border-radius: 12px; }
}

/* ================= Footer (wider, rounded, matching header) ================= */
/* Footer kept visually matching header and pinned to bottom via flex layout */
footer{
  left: 50%;
  transform: translateX(-50%);
  width: calc(100% - 20px);
  max-width: calc(var(--maxw) + 80px);
  margin: 40px auto 0;
  padding: 18px 24px;
  color: #fff;
  font-size: 1rem;
  background: linear-gradient(180deg, #041e2a 0%, #06283b 40%, #0b4a6f 100%);
  border-radius: 20px;
  box-shadow: 0 -10px 36px var(--shadow-strong);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 14px;
  flex-wrap: wrap;
  text-align: center;
  position: relative;
  z-index: 10;

  /* ensure footer occupies expected visual height and doesn't stretch */
  min-height: var(--footer-height);
  height: auto;
  flex: 0 0 auto;
}

/* footer-links contains the links and the signature positioned at bottom */
.footer-links{
  display: block;
  text-align: center;
  position: relative;
  padding-bottom: 26px;
}

/* links */
.footer-links .footer-link{ color: #fff; text-decoration: none; margin: 0 8px; font-weight: 700; display: inline-block; }
.footer-links .footer-link:hover, .footer-links .footer-link:focus-visible{ text-decoration: underline; }
.footer-links .dot{ color: rgba(255,255,255,0.9); display: inline-block; margin: 0 8px; }

/* signature placed under links */
.footer-signature{
  position: absolute;
  left: 50%;
  transform: translateX(-50%) translateY(2px);
  bottom: 0;
  color: rgba(200,210,215,0.9);
  font-weight: 600;
  font-size: 0.88rem;
  white-space: nowrap;
  pointer-events: none;
  user-select: none;
  opacity: 0.95;
}

/* ================= Modals ================= */
.modal{ position: fixed; inset: 0; display: flex; align-items: center; justify-content: center; background: rgba(6,12,20,0.55); z-index: 10000; padding: 28px; transition: opacity .18s ease, visibility .18s ease; }
.modal.hidden{ opacity: 0; visibility: hidden; pointer-events: none; }
.modal-panel{ width: 100%; max-width: 920px; background: linear-gradient(180deg, var(--modal-gradient-top) 0%, rgba(11,74,111,0.92) 36%, var(--modal-gradient-bottom) 100%); color: rgba(11,43,58,0.95); border-radius: 12px; padding: 20px; position: relative; box-shadow: 0 12px 40px rgba(0,0,0,0.3); }
.modal-panel h3{ margin: 0 0 12px 0; color: #ffffff; font-size: 1.25rem; font-weight: 800; line-height: 1.2; text-shadow: 0 2px 6px rgba(0,0,0,0.25); }

.modal-panel .modal-body{ color: #ffffff !important; font-size: 1rem; line-height: 1.7; padding-right: 6px; margin-top: 6px; }
.modal-panel .modal-body hr + p,
.modal-panel .modal-body hr + p + p { color: rgba(11,43,58,0.95) !important; }
.modal-panel .modal-body hr + p strong { color: rgba(11,43,58,0.95) !important; }
.modal-body hr{ border: 0; height: 1px; background: linear-gradient(90deg, rgba(11,74,111,0.12), rgba(11,74,111,0.06)); margin: 14px 0; }
.modal-close{ position: absolute; top: 12px; right: 12px; background: rgba(255,255,255,0.12); color: #fff; border: none; font-size: 18px; cursor: pointer; padding: 8px; border-radius: 10px; transition: transform .12s ease, background .12s ease; }
.modal-close:hover, .modal-close:focus-visible{ background: rgba(255,255,255,0.18); transform: translateY(-1px); outline: none; box-shadow: 0 6px 18px rgba(11,74,111,0.12); }
.modal-panel a, .modal-panel button{ color: var(--accent); }
.modal-panel a:hover, .modal-panel button:hover{ text-decoration: underline; }

/* ================= WhatsApp floating ================= */
.whatsapp-float{
  position: fixed;
  right: 18px;
  bottom: 18px;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: linear-gradient(180deg,#25D366,#1DA851);
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  z-index: 9999;
  box-shadow: 0 12px 36px rgba(37,211,102,0.16);
  text-decoration: none;
}
.whatsapp-float svg{ width: 28px; height: 28px; display: block; fill: #fff; }
.whatsapp-float .wa-label{ position: absolute; right: 78px; bottom: 14px; background: rgba(11,74,111,0.95); color: #fff; padding: 8px 10px; border-radius: 8px; font-size: 0.95rem; white-space: nowrap; opacity: 0; transform: translateX(6px); pointer-events: none; transition: opacity .18s ease, transform .18s ease; }
.whatsapp-float:hover .wa-label, .whatsapp-float:focus-visible .wa-label{ opacity: 1; transform: translateX(0); pointer-events: auto; }
.whatsapp-float:focus-visible, .whatsapp-float:hover{ transform: translateY(-4px); box-shadow: 0 18px 44px rgba(37,211,102,0.22); outline: none; }

/* ================= Copy toast (used by script) ================= */
.copy-toast{
  position: fixed;
  right: 18px;
  bottom: 86px;
  background: rgba(11,74,111,0.92);
  color: #fff;
  padding: 10px 14px;
  border-radius: 10px;
  z-index: 99999;
  box-shadow: 0 8px 24px rgba(0,0,0,0.18);
  font-weight: 600;
  font-size: 0.95rem;
}

/* ================= Accessibility & Responsive tweaks ================= */
/* Use :focus-visible to avoid showing keyboard focus styles on mouse click */
a:focus-visible, button:focus-visible{ box-shadow: 0 0 0 4px rgba(11,74,111,0.12); border-radius: 8px; outline: none; }

/* ================= Motion reduction support ================= */
/* Respect OS-level reduced-motion preference and stop heavy animations/filters */
@media (prefers-reduced-motion: reduce) {
  .presentation-bg::before,
  .presentation-bg::after {
    animation: none !important;
    transition: none !important;
    -webkit-filter: none !important;
    filter: none !important;
  }
  .whatsapp-float .wa-label { transition: none !important; }
}

/* ================= Media queries Android / Tablet ================= */

/* Small phones (<=480px) */
@media (max-width:480px){
  :root{ --base-font-size:15px; --header-height: 96px; --footer-height: 72px; }
  .container{ max-width:100%; margin:12px auto; padding:14px; }
  header{ padding:10px; margin-bottom:16px; border-radius:12px; width: calc(100% - 28px); max-width: none; min-height: var(--header-height); }
  .brand{ position: static; transform: none; margin-bottom: 8px; left: auto; top: auto; }
  .brand img{ width: 56px; height: 56px; padding:4px; border-radius:10px; }
  .header-title .hero-title{ font-size: 1.4rem; -webkit-text-fill-color: #eaf6ff; color: #eaf6ff; background: none; -webkit-background-clip: unset; text-shadow: 0 3px 8px rgba(0,0,0,0.6); }
  .header-title .subtitle{ font-size: 0.82rem; color: rgba(224,230,240,0.95); }
  main{ grid-template-columns: 1fr; gap: 14px; margin-top: 12px; margin-bottom: 18px; min-height: auto; min-height: calc(100vh - var(--header-height) - var(--footer-height)); }
  .btn{ padding: 10px 12px; font-size: 0.95rem; border-radius: 10px; min-height: 44px; display: inline-flex; align-items: center; justify-content: center; }
  .presentation-bg::before, .presentation-bg::after{ -webkit-filter: blur(4px) contrast(0.98) saturate(0.95); filter: blur(4px) contrast(0.98) saturate(0.95); }
  .whatsapp-float{ width: 50px; height: 50px; right: 12px; bottom: 12px; }

  /* stack contexts full width and auto height */
  .contexts{ justify-content: flex-start; flex-wrap: wrap; gap: 16px; scroll-snap-type: none; overflow-x: visible; }
  .context{ flex: 1 1 100%; min-width: unset; max-width: 100%; height: auto; padding: 14px; border-radius: 12px; }
  .context.expanded{
    /* on small screens keep content top-aligned and scrolling */
    align-items: flex-start;
    justify-content: flex-start;
    height: auto;
    padding: 14px;
  }
  .context.expanded > *{ max-width: 100%; }
  aside.card{ max-width: 100%; padding: 14px; border-radius: 12px; }
}

/* Large phones / phablets (481 - 767px) */
@media (min-width:481px) and (max-width:767px){
  :root{ --base-font-size:16px; --header-height: 112px; --footer-height: 76px; }
  .container{ max-width:1100px; padding:18px; }
  header{ padding:12px 14px; margin-bottom:20px; border-radius:14px; width: calc(100% - 36px); max-width: none; min-height: var(--header-height); }
  .brand img{ width:88px; height:88px; }
  main{ grid-template-columns: 1.9fr 0.6fr; gap: 22px; margin-top: 18px; margin-bottom: 26px; min-height: 480px; min-height: calc(100vh - var(--header-height) - var(--footer-height)); }
  .btn{ padding: 12px 16px; }

  /* Two centered cards remain side-by-side with equal height */
  .contexts{ justify-content: center; flex-wrap: nowrap; }
  .context{ flex: 0 0 calc(48% - 12px); max-width: 520px; min-width: 300px; height: 420px; border-radius: 16px; }
  aside.card{ max-width: 380px; }
}

/* Tablets (768 - 1024px) */
@media (min-width:768px) and (max-width:1024px){
  :root{ --base-font-size:17px; --header-height: 128px; --footer-height: 80px; }
  .container{ max-width:1200px; padding:20px; }
  header{ padding:12px 18px; border-radius:16px; margin-bottom:22px; width: calc(100% - 40px); max-width: none; min-height: var(--header-height); }
  .brand img{ width:104px; height:104px; }
  main{ grid-template-columns: 2.2fr 0.8fr; gap: 28px; margin-top: 20px; margin-bottom: 32px; min-height: 520px; min-height: calc(100vh - var(--header-height) - var(--footer-height)); }
  .btn{ padding: 12px 18px; }
  .context{ max-width: 560px; min-width: 320px; height: 460px; border-radius: 18px; }
  aside.card{ max-width: 420px; }
}

/* Larger desktops fallback */
@media (min-width:1201px){
  .container{ max-width: var(--maxw); padding:28px; }
  main{ grid-template-columns: 2.4fr 0.8fr; gap:36px; margin-top:30px; margin-bottom:36px; min-height:560px; min-height: calc(100vh - var(--header-height) - var(--footer-height)); }
  .context{ height:480px; min-width:360px; max-width:600px; border-radius:18px; }
  aside.card{ max-width: 420px; }
}

/* Landscape small-height touch devices */
@media (orientation:landscape) and (max-height:600px) and (hover:none){
  .container{ padding-left:18px; padding-right:18px; }
  header{ padding:10px 12px; }
  main{ gap:16px; min-height:420px; }
}

/* Utility */
.hidden{ display: none !important; }
.center{ text-align: center; }